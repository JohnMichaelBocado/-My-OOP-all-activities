public Inventory() {
        initComponents();
        conn = MySQLConnectionTest.getConnection(); // âœ… assigns to the class-level field
 
    if (conn == null) {
        JOptionPane.showMessageDialog(this, "Database connection failed.", "Error", JOptionPane.ERROR_MESSAGE);
    } else {
        loadTableData();
    }
    }
 
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {
 
        txtITEM = new javax.swing.JTextField();
        btnADD = new javax.swing.JButton();
        jScrollPane1 = new javax.swing.JScrollPane();
        jTable1 = new javax.swing.JTable();
        btnUPDATE = new javax.swing.JButton();
        btnLOAD = new javax.swing.JButton();
        btnDELETE = new javax.swing.JButton();
        txtPRICE = new javax.swing.JTextField();
        txtQUANTITY = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        txtSRCH = new javax.swing.JTextField();
        btnSERCH = new javax.swing.JButton();
        btnCLEAR = new javax.swing.JButton();
 
        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setBackground(new java.awt.Color(153, 255, 255));
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());
 
        txtITEM.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtITEMActionPerformed(evt);
            }
        });
        getContentPane().add(txtITEM, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 90, 140, -1));
 
        btnADD.setBackground(new java.awt.Color(153, 255, 255));
        btnADD.setText("ADD");
        btnADD.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnADDActionPerformed(evt);
            }
        });
        getContentPane().add(btnADD, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 590, 140, 50));
 
        jTable1.setBackground(new java.awt.Color(204, 255, 204));
        jTable1.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0), 2));
        jTable1.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {
 
            },
            new String [] {
                "Item", "Price", "Quantity"
            }
        ));
        jTable1.setCursor(new java.awt.Cursor(java.awt.Cursor.HAND_CURSOR));
        jTable1.setGridColor(new java.awt.Color(51, 51, 51));
        jTable1.setSelectionBackground(new java.awt.Color(204, 204, 204));
        jTable1.setSelectionForeground(new java.awt.Color(255, 255, 255));
        jTable1.setSelectionMode(javax.swing.ListSelectionModel.SINGLE_SELECTION);
        jScrollPane1.setViewportView(jTable1);
 
        getContentPane().add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(110, 230, 730, 339));
 
        btnUPDATE.setBackground(new java.awt.Color(255, 153, 255));
        btnUPDATE.setText("UPDATE");
        btnUPDATE.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnUPDATEActionPerformed(evt);
            }
        });
        getContentPane().add(btnUPDATE, new org.netbeans.lib.awtextra.AbsoluteConstraints(290, 590, 120, 50));
 
        btnLOAD.setBackground(new java.awt.Color(102, 153, 255));
        btnLOAD.setText("LOAD");
        btnLOAD.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnLOADActionPerformed(evt);
            }
        });
        getContentPane().add(btnLOAD, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 670, 140, 50));
 
        btnDELETE.setBackground(new java.awt.Color(255, 153, 153));
        btnDELETE.setText("DELETE");
        btnDELETE.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnDELETEActionPerformed(evt);
            }
        });
        getContentPane().add(btnDELETE, new org.netbeans.lib.awtextra.AbsoluteConstraints(290, 670, 120, 50));
        getContentPane().add(txtPRICE, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 130, 140, -1));
        getContentPane().add(txtQUANTITY, new org.netbeans.lib.awtextra.AbsoluteConstraints(220, 180, 140, -1));
 
        jLabel1.setBackground(new java.awt.Color(51, 51, 51));
        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel1.setText("ITEM");
        getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 90, -1, -1));
 
        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel2.setText("PRICE");
        getContentPane().add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(160, 130, -1, -1));
 
        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 18)); // NOI18N
        jLabel3.setText("QUANTITY");
        getContentPane().add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 180, -1, -1));
        getContentPane().add(txtSRCH, new org.netbeans.lib.awtextra.AbsoluteConstraints(480, 180, 210, -1));
 
        btnSERCH.setText("SEARCH");
        btnSERCH.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnSERCHActionPerformed(evt);
            }
        });
        getContentPane().add(btnSERCH, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 180, -1, -1));
 
        btnCLEAR.setText("CLEAR");
        btnCLEAR.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCLEARActionPerformed(evt);
            }
        });
        getContentPane().add(btnCLEAR, new org.netbeans.lib.awtextra.AbsoluteConstraints(730, 180, -1, -1));
 
        pack();
    }// </editor-fold>                        
 
    private void btnADDActionPerformed(java.awt.event.ActionEvent evt) {                                       
    String name = txtITEM.getText();
    String priceStr = txtPRICE.getText();
    String quantityStr = txtQUANTITY.getText();
 
    if (!name.isEmpty() && !priceStr.isEmpty() && !quantityStr.isEmpty()) {
        try {
            double price = Double.parseDouble(priceStr);
            int quantity = Integer.parseInt(quantityStr);
 
            String sql = "INSERT INTO products (item_name, price, quantity) VALUES (?, ?, ?)";
            PreparedStatement pst = conn.prepareStatement(sql);
            pst.setString(1, name);
            pst.setDouble(2, price);
            pst.setInt(3, quantity);
            pst.executeUpdate();
 
            JOptionPane.showMessageDialog(this, "Product added to database.");
            loadTableData(); // Refresh table
        } catch (Exception ex) {
            JOptionPane.showMessageDialog(this, "Error: " + ex.getMessage());
        }
    } else {
        JOptionPane.showMessageDialog(this, "Please fill in all fields.");
    }
    }                                      
 
    private void btnUPDATEActionPerformed(java.awt.event.ActionEvent evt) {                                          
  int selectedRow = jTable1.getSelectedRow();
    if (selectedRow >= 0) {
        String name = txtITEM.getText();
        double price = Double.parseDouble(txtPRICE.getText());
        int quantity = Integer.parseInt(txtQUANTITY.getText());
 
        try {
            String sql = "UPDATE products SET price = ?, quantity = ? WHERE item_name = ?";
            PreparedStatement pst = conn.prepareStatement(sql);
            pst.setDouble(1, price);
            pst.setInt(2, quantity);
            pst.setString(3, name);
            pst.executeUpdate();
 
            JOptionPane.showMessageDialog(this, "Product updated.");
            loadTableData();
        } catch (SQLException ex) {
            JOptionPane.showMessageDialog(this, "Update failed: " + ex.getMessage());
        }
    } else {
        JOptionPane.showMessageDialog(this, "Please select a product to update.");
    }
    }                                         
 
    private void loadTableData() {
    try {
        DefaultTableModel model = (DefaultTableModel) jTable1.getModel();
        model.setRowCount(0); // Clear existing rows
 
        String sql = "SELECT * FROM products";
        Statement stmt = conn.createStatement();
        ResultSet rs = stmt.executeQuery(sql);
 
        while (rs.next()) {
            Object[] row = {
                rs.getString("item_name"),
                rs.getDouble("price"),
                rs.getInt("quantity")
            };
            model.addRow(row);
        }
 
    } catch (SQLException ex) {
        JOptionPane.showMessageDialog(this, "Failed to load data: " + ex.getMessage());
